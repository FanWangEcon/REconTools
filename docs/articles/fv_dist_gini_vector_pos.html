<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Compute Gini Inequality Coefficient Given Data Vector (One Variable) • REconTools</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Compute Gini Inequality Coefficient Given Data Vector (One Variable)">
<meta property="og:description" content="View a vector positive vectors as population, calculate discrete GINI inequality measure.
">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-92953468-5"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-92953468-5');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">REconTools</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../articles/index.html">Guide Articles</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Other Sites
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="https://fanwangecon.github.io/PrjOptiAlloc/" class="external-link">Project Optimal Allocation (R)</a>
    </li>
    <li>
      <a href="https://fanwangecon.github.io/R4Econ/" class="external-link">R Examples Data and Optimization</a>
    </li>
    <li>
      <a href="https://fanwangecon.github.io/Stat4Econ/" class="external-link">R Examples Introductory Statistics</a>
    </li>
    <li>
      <a href="https://fanwangecon.github.io/Stata4Econ/" class="external-link">Stata Examples Regressions and Tables</a>
    </li>
    <li>
      <a href="https://fanwangecon.github.io/MEconTools/" class="external-link">Matlab Dynamic Savings Problem Package</a>
    </li>
    <li>
      <a href="https://fanwangecon.github.io/M4Econ/" class="external-link">Matlab Examples Matrix and Graphs</a>
    </li>
    <li>
      <a href="https://fanwangecon.github.io/Math4Econ/" class="external-link">Matlab Introductory Math for Econ</a>
    </li>
    <li>
      <a href="https://fanwangecon.github.io/Tex4Econ/" class="external-link">Latex and Paper Generation Examples</a>
    </li>
    <li>
      <a href="https://fanwangecon.github.io/Py4Econ/" class="external-link">Python Examples</a>
    </li>
  </ul>
</li>
<li>
  <a href="http://fanwangecon.github.io/" class="external-link">Fan</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/fanwangecon/REconTools" class="external-link">
    <span class="fa fa-github"></span>
     
  </a>
</li>
<li>
  <a href="https://twitter.com/fanwangecon" class="external-link">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Compute Gini Inequality Coefficient Given Data Vector (One Variable)</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/FanWangEcon/REconTools/blob/HEAD/vignettes/fv_dist_gini_vector_pos.Rmd" class="external-link"><code>vignettes/fv_dist_gini_vector_pos.Rmd</code></a></small>
      <div class="hidden name"><code>fv_dist_gini_vector_pos.Rmd</code></div>

    </div>

    
    
<p>View a vector positive vectors as population, calculate discrete GINI inequality measure. This file works out how the <a href="https://fanwangecon.github.io/REconTools/reference/ff_dist_gini_vector_pos.html">ff_dist_gini_vector_pos</a> function works from <a href="https://fanwangecon.github.io/" class="external-link">Fan</a>’s <em><a href="https://fanwangecon.github.io/REconTools/">REconTools</a></em> Package. See also the <a href="https://fanwangecon.github.io/R4Econ/math/func_ineq/htmlpdfr/fs_gini_disc.html" class="external-link">fs_gini_disc</a> from <em><a href="https://fanwangecon.github.io/R4Econ/" class="external-link">R4Econ</a></em>. See also the <a href="https://fanwangecon.github.io/REconTools/reference/ff_dist_gini_random_var.html">ff_dist_gini_random_var</a> function for GINI for discrete random variables.</p>
<p>There is an vector values (all positive). This could be height information for N individuals. It could also be income information for N individuals. Calculate the <a href="https://en.wikipedia.org/wiki/Gini_coefficient" class="external-link">GINI</a> coefficient treating the given vector as population. This is not an estimation exercise where we want to estimate population gini based on a sample. The given array is the population. The population is discrete, and only has these N individuals in the length n vector.</p>
<p>See the formula below, note that when the sample size is small, there is a limit to inequality using the formula defined below given each <span class="math inline">\(N\)</span>. So for small <span class="math inline">\(N\)</span>, can not really compare inequality across arrays with different <span class="math inline">\(N\)</span>, can only compare arrays with the same <span class="math inline">\(N\)</span>.</p>
<div class="section level2">
<h2 id="formula">Formula<a class="anchor" aria-label="anchor" href="#formula"></a>
</h2>
<p>Given monotonimcally increasing array <span class="math inline">\(X\)</span>, with <span class="math inline">\(x_1,...,x_N\)</span>:</p>
<ol style="list-style-type: decimal">
<li>There is a box, width = 1, height = 1</li>
<li>The width is discretized into <span class="math inline">\(N\)</span> individuals, so each individual’s width is <span class="math inline">\(\frac{1}{N}\)</span>
</li>
<li>The height is normalized to 1, for the nth individual, total height is the sum of all <span class="math inline">\(x\)</span>, so need to rescale all bars by <span class="math inline">\(\sum_i^{N} x_i\)</span>
</li>
</ol>
<p>The GINI formula used here is: <span class="math display">\[
 GINI =
  1 - \frac{2}{N+1}
  \cdot
  \left(\sum_{i=1}^N \sum_{j=1}^{i} x_j\right)
  \cdot
  \left(
    \sum_{i=1}^N x_i
  \right)^{-1}
\]</span></p>
<p>Derive the formula in the steps below.</p>
<div class="section level3">
<h3 id="step-1-area-formula">Step 1 Area Formula<a class="anchor" aria-label="anchor" href="#step-1-area-formula"></a>
</h3>
<p><span class="math display">\[
 \Gamma = \sum_{i=1}^N \frac{1}{N} \cdot \left(
     \sum_{j=1}^{i} \left(
      \frac{x_j}{\sum_{\widehat{j}=1}^N x_{\widehat{j}} }
      \right)
  \right)
\]</span></p>
</div>
<div class="section level3">
<h3 id="step-2-total-area-given-perfect-equality">Step 2 Total Area Given Perfect equality<a class="anchor" aria-label="anchor" href="#step-2-total-area-given-perfect-equality"></a>
</h3>
<p>With perfect equality <span class="math inline">\(x_i=a\)</span> for all <span class="math inline">\(i\)</span>, so need to divide by that.</p>
<p><span class="math display">\[
 \Gamma^{\text{equal}} = \sum_{i=1}^N \frac{1}{N} \cdot \left(
     \sum_{j=1}^{i} \left(
      \frac{a}{\sum_{\widehat{j}=1}^N a }
      \right)
  \right)
  = \frac{N+1}{N}\cdot\frac{1}{2}
\]</span></p>
<p>As the number of elements of the vecotr increases: <span class="math display">\[
 \lim_{N \rightarrow \infty}\Gamma^{\text{equal}}
  = \lim_{N \rightarrow \infty} \frac{N+1}{N}\cdot\frac{1}{2}
  = \frac{1}{2}
\]</span></p>
</div>
<div class="section level3">
<h3 id="step-3-arriving-at-finite-vector-gini-formula">Step 3 Arriving at Finite Vector Gini Formula<a class="anchor" aria-label="anchor" href="#step-3-arriving-at-finite-vector-gini-formula"></a>
</h3>
<p>Given what we have from above, we obtain the gini formula, divide by total area below 45 degree line.</p>
<p><span class="math display">\[
 GINI =
  1 -
  \left(\sum_{i=1}^N \sum_{j=1}^{i} x_j\right)
  \cdot
  \left(
    N \cdot \sum_{i=1}^N x_i
  \right)^{-1}
  \cdot
  \left( \frac{N+1}{N}\cdot\frac{1}{2} \right)^{-1}
  =
  1 - \frac{2}{N+1}
  \cdot
  \left(\sum_{i=1}^N \sum_{j=1}^{i} x_j\right)
  \cdot
  \left(
    \sum_{i=1}^N x_i
  \right)^{-1}
\]</span></p>
</div>
<div class="section level3">
<h3 id="step-4-maximum-inequality-given-n">Step 4 Maximum Inequality given N<a class="anchor" aria-label="anchor" href="#step-4-maximum-inequality-given-n"></a>
</h3>
<p>Suppose <span class="math inline">\(x_i=0\)</span> for all <span class="math inline">\(i&lt;N\)</span>, then:</p>
<p><span class="math display">\[
 GINI^{x_i = 0 \text{ except } i=N}
 =
  1 - \frac{2}{N+1}
  \cdot
  X_N
  \cdot
  \left(
    X_N
  \right)^{-1}
 =
 1 - \frac{2}{N+1}
\]</span></p>
<p><span class="math display">\[
 \lim_{N \rightarrow \infty} GINI^{x_i = 0 \text{ except } i=N}
 =
 1 -
 \lim_{N \rightarrow \infty}
 \frac{2}{N+1}
 = 1
\]</span></p>
<p>Note that for small N, for example if <span class="math inline">\(N=10\)</span>, even when one person holds all income, all others have 0 income, the formula will not produce gini is zero, but that gini is equal to <span class="math inline">\(\frac{2}{11}\approx 0.1818\)</span>. If <span class="math inline">\(N=2\)</span>, inequality is at most, <span class="math inline">\(\frac{2}{3}\approx 0.667\)</span>.</p>
<p><span class="math display">\[
 MostUnequalGINI\left(N\right) = 1 - \frac{2}{N+1} = \frac{N-1}{N+1}
\]</span></p>
</div>
</div>
<div class="section level2">
<h2 id="implement-gini-formula-in-r">Implement GINI Formula in R<a class="anchor" aria-label="anchor" href="#implement-gini-formula-in-r"></a>
</h2>
<p>The <strong>GINI</strong> formula just derived is trivial to compute.</p>
<ol style="list-style-type: decimal">
<li>scalar: <span class="math inline">\(\frac{2}{N+1}\)</span>
</li>
<li>cumsum: <span class="math inline">\(\sum_{j=1}^{i} x_j\)</span>
</li>
<li>sum of cumsum: <span class="math inline">\(\left(\sum_{i=1}^N \sum_{j=1}^{i} x_j\right)\)</span>
</li>
<li>sum: <span class="math inline">\(\sum_{i=1}^N X_i\)</span>
</li>
</ol>
<p>There are no package dependencies. This is the <a href="https://fanwangecon.github.io/REconTools/reference/ff_dist_gini_vector_pos.html">ff_dist_gini_vector_pos</a> function. Define the formula here:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Load Library</span>
<span class="fu"><a href="https://rdrr.io/r/base/rm.html" class="external-link">rm</a></span><span class="op">(</span>list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ls.html" class="external-link">ls</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>
<span class="co"># Formula, directly implement the GINI formula Following Step 4 above</span>
<span class="va">fv_dist_gini_vector_pos_test</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">ar_pos</span><span class="op">)</span> <span class="op">{</span>
  <span class="co"># Check length and given warning</span>
  <span class="va">it_n</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">ar_pos</span><span class="op">)</span>
  <span class="kw">if</span> <span class="op">(</span><span class="va">it_n</span> <span class="op">&lt;=</span> <span class="fl">100</span><span class="op">)</span>  <span class="kw"><a href="https://rdrr.io/r/base/warning.html" class="external-link">warning</a></span><span class="op">(</span><span class="st">'Data vector has n='</span>,<span class="va">it_n</span>,<span class="st">', max-inequality/max-gini='</span>,<span class="op">(</span><span class="va">it_n</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span><span class="op">/</span><span class="op">(</span><span class="va">it_n</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span>
  <span class="co"># Sort</span>
  <span class="va">ar_pos</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort</a></span><span class="op">(</span><span class="va">ar_pos</span><span class="op">)</span>
  <span class="co"># formula implement</span>
  <span class="va">fl_gini</span> <span class="op">&lt;-</span> <span class="fl">1</span> <span class="op">-</span> <span class="op">(</span><span class="op">(</span><span class="fl">2</span><span class="op">/</span><span class="op">(</span><span class="va">it_n</span><span class="op">+</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cumsum</a></span><span class="op">(</span><span class="va">ar_pos</span><span class="op">)</span><span class="op">)</span><span class="op">*</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">ar_pos</span><span class="op">)</span><span class="op">)</span><span class="op">^</span><span class="op">(</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span>
  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">fl_gini</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<div class="section level3">
<h3 id="testing">Testing<a class="anchor" aria-label="anchor" href="#testing"></a>
</h3>
<p>Generate a number of examples Arrays for testing</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Example Arrays of data</span>
<span class="va">ar_equal_n1</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>
<span class="va">ar_ineql_n1</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span><span class="op">)</span>

<span class="va">ar_equal_n2</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">1</span><span class="op">)</span>
<span class="va">ar_ineql_alittle_n2</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span>
<span class="va">ar_ineql_somewht_n2</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">^</span><span class="fl">3</span><span class="op">)</span>
<span class="va">ar_ineql_alotine_n2</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">^</span><span class="fl">5</span><span class="op">)</span>
<span class="va">ar_ineql_veryvry_n2</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">^</span><span class="fl">8</span><span class="op">)</span>
<span class="va">ar_ineql_mostmst_n2</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">^</span><span class="fl">13</span><span class="op">)</span>

<span class="va">ar_equal_n10</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">2</span>,<span class="fl">2</span>,<span class="fl">2</span>,<span class="fl">2</span>,<span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span>
<span class="va">ar_ineql_some_n10</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">5</span>,<span class="fl">8</span>,<span class="fl">13</span>,<span class="fl">21</span>,<span class="fl">34</span>,<span class="fl">55</span>,<span class="fl">89</span><span class="op">)</span>
<span class="va">ar_ineql_very_n10</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">^</span><span class="fl">2</span>,<span class="fl">3</span><span class="op">^</span><span class="fl">2</span>,<span class="fl">5</span><span class="op">^</span><span class="fl">2</span>,<span class="fl">8</span><span class="op">^</span><span class="fl">2</span>,<span class="fl">13</span><span class="op">^</span><span class="fl">2</span>,<span class="fl">21</span><span class="op">^</span><span class="fl">2</span>,<span class="fl">34</span><span class="op">^</span><span class="fl">2</span>,<span class="fl">55</span><span class="op">^</span><span class="fl">2</span>,<span class="fl">89</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span>
<span class="va">ar_ineql_extr_n10</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">^</span><span class="fl">2</span>,<span class="fl">3</span><span class="op">^</span><span class="fl">3</span>,<span class="fl">5</span><span class="op">^</span><span class="fl">4</span>,<span class="fl">8</span><span class="op">^</span><span class="fl">5</span>,<span class="fl">13</span><span class="op">^</span><span class="fl">6</span>,<span class="fl">21</span><span class="op">^</span><span class="fl">7</span>,<span class="fl">34</span><span class="op">^</span><span class="fl">8</span>,<span class="fl">55</span><span class="op">^</span><span class="fl">9</span>,<span class="fl">89</span><span class="op">^</span><span class="fl">10</span><span class="op">)</span>

<span class="co"># Uniform draw testing</span>
<span class="va">ar_unif_n1000</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1000</span>, min<span class="op">=</span><span class="fl">0</span>, max<span class="op">=</span><span class="fl">1</span><span class="op">)</span>

<span class="co"># Normal draw testing</span>
<span class="va">ar_norm_lowsd_n1000</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">1000</span>, mean<span class="op">=</span><span class="fl">100</span>, sd <span class="op">=</span><span class="fl">1</span><span class="op">)</span>
<span class="va">ar_norm_lowsd_n1000</span><span class="op">[</span><span class="va">ar_norm_lowsd_n1000</span><span class="op">&lt;</span><span class="fl">0</span><span class="op">]</span> <span class="op">=</span> <span class="fl">0</span>
<span class="va">ar_norm_highsd_n1000</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">1000</span>, mean<span class="op">=</span><span class="fl">100</span>, sd <span class="op">=</span><span class="fl">20</span><span class="op">)</span>
<span class="va">ar_norm_highsd_n1000</span><span class="op">[</span><span class="va">ar_norm_highsd_n1000</span><span class="op">&lt;</span><span class="fl">0</span><span class="op">]</span> <span class="op">=</span> <span class="fl">0</span>

<span class="co"># Beta draw testing</span>
<span class="va">ar_beta_mostrich_n1000</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Beta.html" class="external-link">rbeta</a></span><span class="op">(</span><span class="fl">1000</span>, <span class="fl">5</span>, <span class="fl">1</span><span class="op">)</span>
<span class="va">ar_beta_mostpoor_n1000</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Beta.html" class="external-link">rbeta</a></span><span class="op">(</span><span class="fl">1000</span>, <span class="fl">1</span>, <span class="fl">5</span><span class="op">)</span>
<span class="va">ar_beta_manyrichmanypoor_nomiddle_n1000</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Beta.html" class="external-link">rbeta</a></span><span class="op">(</span><span class="fl">1000</span>, <span class="fl">0.5</span>, <span class="fl">0.5</span><span class="op">)</span></code></pre></div>
<p>Now test the example arrays above using the function based no our formula:</p>
<pre><code><span class="co">#&gt; </span>
<span class="co">#&gt; Small N=1 Hard-Code</span>
<span class="co">#&gt; Warning in fv_dist_gini_vector_pos_test(ar_equal_n1): Data vector has n=1, max-</span>
<span class="co">#&gt; inequality/max-gini=0</span>
<span class="co">#&gt; ar_equal_n1: 0</span>
<span class="co">#&gt; Warning in fv_dist_gini_vector_pos_test(ar_ineql_n1): Data vector has n=1, max-</span>
<span class="co">#&gt; inequality/max-gini=0</span>
<span class="co">#&gt; ar_ineql_n1: 0</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Small N=2 Hard-Code, converge to 1/3, see formula above</span>
<span class="co">#&gt; Warning in fv_dist_gini_vector_pos_test(ar_ineql_alittle_n2): Data vector has</span>
<span class="co">#&gt; n=2, max-inequality/max-gini=0.333333333333333</span>
<span class="co">#&gt; ar_ineql_alittle_n2: 0.1111111</span>
<span class="co">#&gt; Warning in fv_dist_gini_vector_pos_test(ar_ineql_somewht_n2): Data vector has</span>
<span class="co">#&gt; n=2, max-inequality/max-gini=0.333333333333333</span>
<span class="co">#&gt; ar_ineql_somewht_n2: 0.2592593</span>
<span class="co">#&gt; Warning in fv_dist_gini_vector_pos_test(ar_ineql_alotine_n2): Data vector has</span>
<span class="co">#&gt; n=2, max-inequality/max-gini=0.333333333333333</span>
<span class="co">#&gt; ar_ineql_alotine_n2: 0.3131313</span>
<span class="co">#&gt; Warning in fv_dist_gini_vector_pos_test(ar_ineql_veryvry_n2): Data vector has</span>
<span class="co">#&gt; n=2, max-inequality/max-gini=0.333333333333333</span>
<span class="co">#&gt; ar_ineql_veryvry_n2: 0.3307393</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Small N=10 Hard-Code, convege to 9/11=0.8181, see formula above</span>
<span class="co">#&gt; Warning in fv_dist_gini_vector_pos_test(ar_equal_n10): Data vector has n=10,</span>
<span class="co">#&gt; max-inequality/max-gini=0.818181818181818</span>
<span class="co">#&gt; ar_equal_n10: 0</span>
<span class="co">#&gt; Warning in fv_dist_gini_vector_pos_test(ar_ineql_some_n10): Data vector has</span>
<span class="co">#&gt; n=10, max-inequality/max-gini=0.818181818181818</span>
<span class="co">#&gt; ar_ineql_some_n10: 0.5395514</span>
<span class="co">#&gt; Warning in fv_dist_gini_vector_pos_test(ar_ineql_very_n10): Data vector has</span>
<span class="co">#&gt; n=10, max-inequality/max-gini=0.818181818181818</span>
<span class="co">#&gt; ar_ineql_very_n10: 0.7059554</span>
<span class="co">#&gt; Warning in fv_dist_gini_vector_pos_test(ar_ineql_extr_n10): Data vector has</span>
<span class="co">#&gt; n=10, max-inequality/max-gini=0.818181818181818</span>
<span class="co">#&gt; ar_ineql_extr_n10: 0.8181549</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; UNIFORM Distribution</span>
<span class="co">#&gt; ar_unif_n1000: 0.3265402</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; NORMAL Distribution</span>
<span class="co">#&gt; ar_norm_lowsd_n1000: 0.005550226</span>
<span class="co">#&gt; ar_norm_highsd_n1000: 0.1153259</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; BETA Distribution</span>
<span class="co">#&gt; ar_beta_mostpoor_n1000: 0.454737</span>
<span class="co">#&gt; ar_beta_manyrichmanypoor_nomiddle_n1000: 0.4205884</span>
<span class="co">#&gt; ar_beta_mostrich_n1000: 0.09296366</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; SHOULD/DOES NOT WORK TEST</span>
<span class="co">#&gt;  ar_unif_n1000_NEGATIVE: -69.42136</span></code></pre>
</div>
</div>
<div class="section level2">
<h2 id="gini-for-discrete-random-variable">Gini for Discrete Random Variable<a class="anchor" aria-label="anchor" href="#gini-for-discrete-random-variable"></a>
</h2>
<p><a href="https://fanwangecon.github.io/REconTools/reference/ff_dist_gini_random_var.html">ff_dist_gini_random_var</a> provides the GINI implementation for a discrete random variable. The procedure is the same as prior, except now each element of the “x” array has element specific weights associated with it. The function can handle unsorted array with non-unique values.</p>
<p>Test and compare <a href="https://fanwangecon.github.io/REconTools/reference/ff_dist_gini_random_var.html">ff_dist_gini_random_var</a> provides the GINI implementation for a discrete random variable and <a href="https://fanwangecon.github.io/REconTools/reference/ff_dist_gini_vector_pos.html">ff_dist_gini_vector_pos</a>.</p>
<p>There is a vector of values from 1 to 100, in ascending order. What is the equal-weighted gini, the gini result when smaller numbers have higher weights, and when larger numbers have higher weights?</p>
<p>First, generate the relevant values.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># array</span>
<span class="va">ar_x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">100</span>, length.out <span class="op">=</span> <span class="fl">30</span><span class="op">)</span>
<span class="co"># prob array</span>
<span class="va">ar_prob_x_unif</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep.int</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">ar_x</span><span class="op">)</span><span class="op">)</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep.int</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">ar_x</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="co"># prob higher at lower values</span>
<span class="va">ar_prob_x_lowval_highwgt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rev.html" class="external-link">rev</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cumsum</a></span><span class="op">(</span><span class="va">ar_prob_x_unif</span><span class="op">)</span><span class="op">)</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cumsum</a></span><span class="op">(</span><span class="va">ar_prob_x_unif</span><span class="op">)</span><span class="op">)</span>
<span class="co"># prob higher at lower values</span>
<span class="va">ar_prob_x_highval_highwgt</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cumsum</a></span><span class="op">(</span><span class="va">ar_prob_x_unif</span><span class="op">)</span><span class="op">)</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cumsum</a></span><span class="op">(</span><span class="va">ar_prob_x_unif</span><span class="op">)</span><span class="op">)</span>
<span class="co"># show</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">ar_x</span>, <span class="va">ar_prob_x_unif</span>, <span class="va">ar_prob_x_lowval_highwgt</span>, <span class="va">ar_prob_x_highval_highwgt</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;             ar_x ar_prob_x_unif ar_prob_x_lowval_highwgt</span>
<span class="co">#&gt;  [1,]   1.000000     0.03333333              0.064516129</span>
<span class="co">#&gt;  [2,]   4.413793     0.03333333              0.062365591</span>
<span class="co">#&gt;  [3,]   7.827586     0.03333333              0.060215054</span>
<span class="co">#&gt;  [4,]  11.241379     0.03333333              0.058064516</span>
<span class="co">#&gt;  [5,]  14.655172     0.03333333              0.055913978</span>
<span class="co">#&gt;  [6,]  18.068966     0.03333333              0.053763441</span>
<span class="co">#&gt;  [7,]  21.482759     0.03333333              0.051612903</span>
<span class="co">#&gt;  [8,]  24.896552     0.03333333              0.049462366</span>
<span class="co">#&gt;  [9,]  28.310345     0.03333333              0.047311828</span>
<span class="co">#&gt; [10,]  31.724138     0.03333333              0.045161290</span>
<span class="co">#&gt; [11,]  35.137931     0.03333333              0.043010753</span>
<span class="co">#&gt; [12,]  38.551724     0.03333333              0.040860215</span>
<span class="co">#&gt; [13,]  41.965517     0.03333333              0.038709677</span>
<span class="co">#&gt; [14,]  45.379310     0.03333333              0.036559140</span>
<span class="co">#&gt; [15,]  48.793103     0.03333333              0.034408602</span>
<span class="co">#&gt; [16,]  52.206897     0.03333333              0.032258065</span>
<span class="co">#&gt; [17,]  55.620690     0.03333333              0.030107527</span>
<span class="co">#&gt; [18,]  59.034483     0.03333333              0.027956989</span>
<span class="co">#&gt; [19,]  62.448276     0.03333333              0.025806452</span>
<span class="co">#&gt; [20,]  65.862069     0.03333333              0.023655914</span>
<span class="co">#&gt; [21,]  69.275862     0.03333333              0.021505376</span>
<span class="co">#&gt; [22,]  72.689655     0.03333333              0.019354839</span>
<span class="co">#&gt; [23,]  76.103448     0.03333333              0.017204301</span>
<span class="co">#&gt; [24,]  79.517241     0.03333333              0.015053763</span>
<span class="co">#&gt; [25,]  82.931034     0.03333333              0.012903226</span>
<span class="co">#&gt; [26,]  86.344828     0.03333333              0.010752688</span>
<span class="co">#&gt; [27,]  89.758621     0.03333333              0.008602151</span>
<span class="co">#&gt; [28,]  93.172414     0.03333333              0.006451613</span>
<span class="co">#&gt; [29,]  96.586207     0.03333333              0.004301075</span>
<span class="co">#&gt; [30,] 100.000000     0.03333333              0.002150538</span>
<span class="co">#&gt;       ar_prob_x_highval_highwgt</span>
<span class="co">#&gt;  [1,]               0.002150538</span>
<span class="co">#&gt;  [2,]               0.004301075</span>
<span class="co">#&gt;  [3,]               0.006451613</span>
<span class="co">#&gt;  [4,]               0.008602151</span>
<span class="co">#&gt;  [5,]               0.010752688</span>
<span class="co">#&gt;  [6,]               0.012903226</span>
<span class="co">#&gt;  [7,]               0.015053763</span>
<span class="co">#&gt;  [8,]               0.017204301</span>
<span class="co">#&gt;  [9,]               0.019354839</span>
<span class="co">#&gt; [10,]               0.021505376</span>
<span class="co">#&gt; [11,]               0.023655914</span>
<span class="co">#&gt; [12,]               0.025806452</span>
<span class="co">#&gt; [13,]               0.027956989</span>
<span class="co">#&gt; [14,]               0.030107527</span>
<span class="co">#&gt; [15,]               0.032258065</span>
<span class="co">#&gt; [16,]               0.034408602</span>
<span class="co">#&gt; [17,]               0.036559140</span>
<span class="co">#&gt; [18,]               0.038709677</span>
<span class="co">#&gt; [19,]               0.040860215</span>
<span class="co">#&gt; [20,]               0.043010753</span>
<span class="co">#&gt; [21,]               0.045161290</span>
<span class="co">#&gt; [22,]               0.047311828</span>
<span class="co">#&gt; [23,]               0.049462366</span>
<span class="co">#&gt; [24,]               0.051612903</span>
<span class="co">#&gt; [25,]               0.053763441</span>
<span class="co">#&gt; [26,]               0.055913978</span>
<span class="co">#&gt; [27,]               0.058064516</span>
<span class="co">#&gt; [28,]               0.060215054</span>
<span class="co">#&gt; [29,]               0.062365591</span>
<span class="co">#&gt; [30,]               0.064516129</span></code></pre></div>
<p>Second, generate GINI values. What should happen?</p>
<ol style="list-style-type: decimal">
<li>The <a href="https://fanwangecon.github.io/REconTools/reference/ff_dist_gini_random_var.html">ff_dist_gini_random_var</a> and <a href="https://fanwangecon.github.io/REconTools/reference/ff_dist_gini_vector_pos.html">ff_dist_gini_vector_pos</a> results should be the same when the uniform distribution is used.</li>
<li>GINI should be higher, more inequality, if there is higher weights on the lower values.</li>
<li>GINI should be lower, more equality, if there is higher weight on the higher values.</li>
</ol>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://fanwangecon.github.io/REconTools/">REconTools</a></span><span class="op">)</span>
<span class="fu"><a href="../reference/ff_dist_gini_vector_pos.html">ff_dist_gini_vector_pos</a></span><span class="op">(</span><span class="va">ar_x</span><span class="op">)</span>
<span class="co">#&gt; Warning in ff_dist_gini_vector_pos(ar_x): Data vector has only n=30, max-</span>
<span class="co">#&gt; inequality/min-gini=0.935483870967742</span>
<span class="co">#&gt; [1] 0.3267327</span>
<span class="fu"><a href="../reference/ff_dist_gini_random_var.html">ff_dist_gini_random_var</a></span><span class="op">(</span><span class="va">ar_x</span>, <span class="va">ar_prob_x_unif</span><span class="op">)</span>
<span class="co">#&gt; [1] 0.3267327</span>
<span class="fu"><a href="../reference/ff_dist_gini_random_var.html">ff_dist_gini_random_var</a></span><span class="op">(</span><span class="va">ar_x</span>, <span class="va">ar_prob_x_lowval_highwgt</span><span class="op">)</span>
<span class="co">#&gt; [1] 0.4010343</span>
<span class="fu"><a href="../reference/ff_dist_gini_random_var.html">ff_dist_gini_random_var</a></span><span class="op">(</span><span class="va">ar_x</span>, <span class="va">ar_prob_x_highval_highwgt</span><span class="op">)</span>
<span class="co">#&gt; [1] 0.1926849</span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by <a href="https://fanwangecon.github.io" class="external-link">Fan Wang</a>.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
